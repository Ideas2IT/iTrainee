@model IEnumerable<iTrainee.Models.User>

@{
    ViewData["Title"] = "ManageUser";
}

<style>
    .delete-icon {
        color: red;
        font-size: x-large;
    }
        .edit-icon {
        color: #00239B;
        font-size: x-large;
    }
    .btn-add-gradient {
        background-image: linear-gradient(144deg,#009ffd, rgb(0,35,155) 50%);
        border-radius: 4px;
        box-shadow: rgba(0, 79, 255, 0.3) 0 15px 30px -5px;
        color: #FFFF;
        cursor: pointer;
        transform: translateY(-6px);
        transition: transform 700ms cubic-bezier(.3, .7, .4, 1.5);
    }
</style>

<div class="d-flex justify-content-between mt-4">
    <h3>Manage @ViewBag.Role</h3>
    <button data-toggle="modal" class="btn btn-add-gradient btn-primary mb-3" onclick="GetUser(0)" data-target="#myModal1">Add New</button>
</div>
<table class="table table-hover table-bordered">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Id)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.LastName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DOB)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Qualification)
        </th>
        <th colspan="2">Actions</th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Id)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FirstName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.LastName)
            </td>
            <td>
                @item.DOB.ToString("dd-MM-yyyy")
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Qualification)
            </td>
            <td>
                <a onclick="GetUser(@item.Id)" ><i class="fa fa-pencil edit-icon"></i></a>
                <a data-id-to-delete="@item.Id" class="ml-4" data-toggle="modal" data-target="#delete"><i class="fa fa-trash delete-icon"></i></a>
            </td>
        </tr>
    }
</table>

<div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Confirm</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure want to delete <span id="name-to-delete"></span>???</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger" id="delete-yes-button" data-dismiss="modal">Delete</button>
            </div>
        </div>
    </div>
</div>


<div class="modal" fade" id="myModal1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">@ViewBag.Role Details</h3>
            </div>
            <div class="modal-body" id="myModalBodyDiv1">
            </div>
        </div>
    </div>
</div>


@section scripts {
<script type="text/javascript">

    var GetUser = function (id) {
        var UserPath = "/Admin/Home/SaveUser?Id=" + id;
        $("#myModalBodyDiv1").load(UserPath, function () {
            $("#myModal1").modal("show");
        });
    };

    $('#delete').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget)
            var id = button.data('id-to-delete')

                    $('#delete-yes-button').on('click', function () {
                        $.ajax({
                            url: "/Admin/Home/DeleteUser/" + id,
                            type: "POST",
                            contentType: "application/json;charset=UTF-8",
                            dataType: "json",

                        })
                    })
        })
</script>


}